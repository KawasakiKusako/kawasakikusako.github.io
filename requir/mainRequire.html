<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>“青川通办”AI治理反馈实验系统</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Microsoft YaHei", Arial, sans-serif;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .page {
            display: none;
            padding: 30px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        .page.active {
            display: block;
        }
        h1 {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            font-size: 20px;
            color: #34495e;
            margin: 15px 0;
        }
        p {
            font-size: 16px;
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .btn-group {
            margin-top: 30px;
            text-align: center;
        }
        .btn {
            padding: 12px 30px;
            font-size: 16px;
            color: #fff;
            background-color: #3498db;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .form-group {
            margin-bottom: 25px;
        }
        label {
            display: block;
            font-size: 16px;
            color: #34495e;
            margin-bottom: 8px;
        }
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        textarea {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            min-height: 120px;
            margin-top: 8px;
        }
        .feedback-box {
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background-color: #f8f9fa;
            margin-top: 15px;
        }
        .scale-group {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        .scale-item {
            text-align: center;
            width: 14%;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 1. 系统启动 - 背景设定页面 -->
        <div class="page active" id="page1">
            <h1>系统启动：“青川通办”平台背景介绍</h1>
            <p>尊敬的参与者：</p>
            <p>您好！欢迎参与本次关于AI治理反馈系统的学术实验研究。本次实验旨在探索政务AI反馈机制如何影响公民信任与集体行动，所有数据仅用于学术分析，将严格匿名化处理，保障您的隐私安全。</p>
            <p>您将体验的“青川通办”平台，是青川市政府为实现“动态优化治理”而推出的新型AI系统。该系统通过智能算法收集市民对公共议题的意见、生成反馈信息，并助力政府动态调整治理策略，提升城市治理效率与市民参与度。</p>
            <p>请您根据真实想法和感受完成后续任务，您的参与对本研究至关重要！</p>
            <div class="btn-group">
                <button class="btn" onclick="showPage(3)">下一步</button>
            </div>
        </div>

        <!-- 2. 系统启动 - 初始信任测量页面 
        <div class="page" id="page2">
            <h1>系统启动：初始政府信任测量（基线）</h1>
            <p>在体验“青川通办”平台前，请您根据自身实际感受，对以下问题进行评价（采用1-7分制，1分表示“非常不信任”，7分表示“非常信任”）。</p>
            <div class="form-group">
                <label for="initial-trust">问题：在本次实验开始前，您对政府管理公共事务的总体信任度如何？</label>
                <div class="scale-group">
                    <div class="scale-item">
                        <input type="radio" name="initialTrust" id="trust1" value="1" required>
                        <label for="trust1">1<br>非常不信任</label>
                    </div>
                    <div class="scale-item">
                        <input type="radio" name="initialTrust" id="trust2" value="2">
                        <label for="trust2">2</label>
                    </div>
                    <div class="scale-item">
                        <input type="radio" name="initialTrust" id="trust3" value="3">
                        <label for="trust3">3</label>
                    </div>
                    <div class="scale-item">
                        <input type="radio" name="initialTrust" id="trust4" value="4">
                        <label for="trust4">4<br>一般信任</label>
                    </div>
                    <div class="scale-item">
                        <input type="radio" name="initialTrust" id="trust5" value="5">
                        <label for="trust5">5</label>
                    </div>
                    <div class="scale-item">
                        <input type="radio" name="initialTrust" id="trust6" value="6">
                        <label for="trust6">6</label>
                    </div>
                    <div class="scale-item">
                        <input type="radio" name="initialTrust" id="trust7" value="7">
                        <label for="trust7">7<br>非常信任</label>
                    </div>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn" onclick="showPage(1)">上一步</button>
                <button class="btn" onclick="showPage(3)">下一步：公共议题场景呈现</button>
            </div>
        </div>
        -->
        <!-- 3. 需求输入 - 场景呈现页面 -->
        <div class="page" id="page3">
            <h1>需求输入：公园翻新公共议题场景</h1>
            <p>青川市计划对市中心某老旧公园进行翻新改造，目前拟定两种核心翻新方案，现通过“青川通办”平台广泛收集市民意见，以下是两种方案的详细说明：</p>
            <h2>方案一：生态优先型</h2>
            <p>重点提升公园生态环境质量，具体包括：增加30%绿植种植面积（以本地原生植物为主）、打造小型人工湿地（兼具生态净化与景观功能）、设置生态科普展示区（介绍本地动植物知识）；同时保留现有休闲设施并进行基础维护，新增10组木质休闲座椅和2条环形步行栈道（宽度1.2米）。</p>
            <h2>方案二：休闲功能型</h2>
            <p>以满足市民多元休闲需求为核心，具体包括：新建儿童游乐区（配备安全塑胶地面与中小型游乐设施）、老年健身区（安装15组健身器材）、露天活动广场（面积约800㎡，可举办小型社区活动）；增设5个大型遮阳棚和8座休息凉亭；对现有绿化进行适度调整，保留核心景观树，扩大活动空间占比至60%。</p>
            <p>请您认真阅读两种方案内容，接下来需提交您的选择及支持理由。</p>
            <div class="btn-group">
                <button class="btn" onclick="showPage(1)">上一步</button>
                <button class="btn" onclick="showPage(4)">下一步：提交意见</button>
            </div>
        </div>

        <!-- 4. 需求输入 - 意见提交页面 -->
        <div class="page" id="page4">
            <h1>需求输入：公园翻新方案意见提交</h1>
            <p>请根据您对两种公园翻新方案的理解，完成以下信息填写（*为必填项）：</p>
            <div class="form-group">
                <label>*1. 您更支持哪种公园翻新方案？</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" name="planChoice" id="plan1" value="生态优先型" required>
                        <label for="plan1">方案一：生态优先型</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="planChoice" id="plan2" value="休闲功能型">
                        <label for="plan2">方案二：休闲功能型</label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>*2. 请简要说明您支持该方案的理由（字数不少于50字，强制输入）：</label>
                <textarea id="reasonInput" placeholder="例如：我支持方案一，因为...（请详细说明理由）" required></textarea>
                <p style="color:#7f8c8d; font-size:14px;">当前字数：<span id="wordCount">0</span> / 最少50字</p>
            </div>
            <div class="btn-group">
                <button class="btn" onclick="showPage(3)">上一步</button>
                <button class="btn" onclick="submitOpinion()">提交意见，获取AI反馈</button>
            </div>
        </div>

        <!-- 5. 核心操纵 - 操纵呈现页面（随机分组反馈） -->
        <div class="page" id="page5">
            <h1>核心操纵：“青川通办”AI反馈结果</h1>
            <p>尊敬的参与者，您提交的关于青川市公园翻新方案的意见已成功接收，以下是“青川通办”AI系统为您生成的定制化反馈信息：</p>
            <div class="feedback-box" id="feedbackContent">
                <!-- 此处将通过JS随机生成8组反馈中的1组，对应实验设计中的8个分组 -->
            </div>
            <p style="margin-top:20px;">请您认真阅读上述反馈信息，后续将基于此反馈开展相关测量。</p>
            <div class="btn-group">
                <button class="btn" onclick="showPage(4)">上一步：修改意见</button>
                <button class="btn" onclick="alert('核心操纵环节完成，即将进入机制测量环节（因变量与中介变量测量）')">下一步：机制测量</button>
            </div>
        </div>
    </div>

    <script>
        // 页面切换函数
        function showPage(pageNum) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            // 显示目标页面
            document.getElementById(`page${pageNum}`).classList.add('active');
        }

        // 意见提交字数统计
        const reasonInput = document.getElementById('reasonInput');
        const wordCount = document.getElementById('wordCount');
        reasonInput.addEventListener('input', () => {
            const count = reasonInput.value.trim().length;
            wordCount.textContent = count;
            // 字数不足时提示
            if (count < 50) {
                wordCount.style.color = '#e74c3c';
            } else {
                wordCount.style.color = '#27ae60';
            }
        });

        // 提交意见并生成随机分组反馈
        function submitOpinion() {
            const planChoice = document.querySelector('input[name="planChoice"]:checked');
            const reason = reasonInput.value.trim();
            
            // 验证必填项
            if (!planChoice || reason.length < 20) {
                alert('请完成所有必填项：1. 选择支持的方案；2. 理由字数不少于20字');
                return;
            }

            // 实验设计中的8组反馈内容（对应8个被试间分组）
            const feedbackGroups = [
                // 组1：即时、透明、个性化
                '感谢您，王先生/女士。您的反馈已即时处理。基于市政条例§4.2(优先绿地原则)，您的意见已分类至“生态优化”类别。系统记录您曾关注过城市绿化新闻。（分组1）',
                // 组2：即时、透明、标准化
                '感谢您的反馈。您的反馈已即时处理。基于市政条例§4.2(优先绿地原则)，您的意见已分类至“生态优化”类别，并递交给市园林规划部。（分组2）',
                // 组3：即时、黑箱、个性化
                '感谢您，王先生/女士。您的反馈已由“青川通办”系统即时处理。系统记录您曾关注过城市绿化新闻。（分组3）',
                // 组4：即时、黑箱、标准化
                '感谢您的反馈。您的反馈已由“青川通办”系统即时处理。（分组4）',
                // 组5：延迟、透明、个性化
                '感谢您，王先生/女士。我们已收到您的反馈。系统将在24小时内进行处理。届时将基于市政条例进行分类并递交相关部门。系统记录您曾关注过城市绿化新闻。（分组5）',
                // 组6：延迟、透明、标准化
                '感谢您的反馈。我们已收到您的反馈。系统将在24小时内进行处理。届时将基于市政条例进行分类并递交相关部门。（分组6）',
                // 组7：延迟、黑箱、个性化
                '感谢您，王先生/女士。我们已收到您的反馈。“青川通办”系统将在24小时内进行处理。系统记录您曾关注过城市绿化新闻。（分组7）',
                // 组8：延迟、黑箱、标准化
                '感谢您的反馈。我们已收到您的反馈。“青川通办”系统将在24小时内进行处理。（分组8）',
            ];

            // 随机选择1组反馈（模拟被试随机分组）
            const randomIndex = Math.floor(Math.random() * feedbackGroups.length);
            const selectedFeedback = feedbackGroups[randomIndex];
            // 显示反馈内容
            document.getElementById('feedbackContent').textContent = selectedFeedback;
            // 跳转至反馈页面
            showPage(5);

            // 记录分组信息（用于后续数据分析，此处仅控制台输出模拟）
            console.log(`被试随机分组：第${randomIndex + 1}组`);
            console.log(`反馈类型：${getFeedbackType(randomIndex + 1)}`);
        }

        // 辅助函数：根据分组序号获取反馈类型（速度、清晰度、个性化）
        function getFeedbackType(groupNum) {
            const typeMap = {
                1: '速度=即时，清晰度=透明，个性化=是',
                2: '速度=即时，清晰度=透明，个性化=否',
                3: '速度=即时，清晰度=黑箱，个性化=是',
                4: '速度=即时，清晰度=黑箱，个性化=否',
                5: '速度=延迟(24h)，清晰度=透明，个性化=是',
                6: '速度=延迟(24h)，清晰度=透明，个性化=否',
                7: '速度=延迟(24h)，清晰度=黑箱，个性化=是',
                8: '速度=延迟(24h)，清晰度=黑箱，个性化=否'
            };
            return typeMap[groupNum];
        }
    </script>
</body>
</html>
